# Task Log: TASK-BF-20250411-173222 - Bug Fix: Failing test_experience_filter_with_cache

**Goal:** Investigate and fix Bug #TASK-BF-20250411-173222 - Test `test_experience_filter_with_cache` in `app/tests/test_experience_filter.py` failing with `QueryBuildingError: cannot unpack non-iterable NoneType object` after company filter changes in `app/libs/job_matcher/query_builder.py`.

**Investigation & Diagnosis:**
*   Read `app/tests/test_experience_filter.py`. The failing test `test_experience_filter_with_cache` calls `job_matcher.process_job` without the new `company` parameter.
*   Read `app/libs/job_matcher/query_builder.py`. Found the root cause:
    *   The `_build_experience_filters` method is missing a `return` statement for the case where valid experience levels are provided.
    *   It implicitly returns `None` instead of `(list_of_clauses, list_of_params)`.
    *   The calling function `build_filter_conditions` attempts to unpack this `None` on line 57 (`experience_clauses, experience_params = self._build_experience_filters(experience)`), leading to the `TypeError: cannot unpack non-iterable NoneType object`.
    *   There are also misplaced lines (253-259) related to the experience filter return logic.

**Fix Implementation:**
*   Applied diff to `app/libs/job_matcher/query_builder.py` to add the missing `return` statement in `_build_experience_filters` and remove misplaced code.

**Verification:**
*   Ran `pytest app/tests/test_experience_filter.py`.
*   Result: ✅ 5 passed, 0 failed. The `test_experience_filter_with_cache` test now passes.

---
**Status:** ✅ Complete
**Outcome:** Success
**Summary:** Fixed `TypeError: cannot unpack non-iterable NoneType object` in `app/libs/job_matcher/query_builder.py` affecting `test_experience_filter_with_cache`. The error was caused by a missing return statement in the `_build_experience_filters` method.
**Root Cause:** Missing `return` statement in `_build_experience_filters` method within `app/libs/job_matcher/query_builder.py`.
**References:** [`app/libs/job_matcher/query_builder.py` (modified), `app/tests/test_experience_filter.py` (verified)]